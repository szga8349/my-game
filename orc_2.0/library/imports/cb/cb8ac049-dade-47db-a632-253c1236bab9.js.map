{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\Game/assets\\Script\\Game\\Ball.js"],"names":["Global","require","colors","mountain","tree","floor","ground","cc","Class","extends","Component","properties","moveBox","default","type","Node","bgColor","audioFloor","AudioClip","audioDeath","audioBox","audioBoom","audioBoard","scoreLabel","Label","maxLabel","moneyLabel","moneyTip","explodeBoom","Prefab","explodeGold","moneyTipMove","num","userInfo","money","string","show","spawn","fadeIn","scaleTo","stop","hide","fadeOut","seq","sequence","easing","easeOut","node","runAction","viewScale","val","y","ss","game","wrap","scale","colorSwitch","transform","key","callFunc","color","hexToColor","bgMove","_w","width","sun","getChildByName","cloud","speed","gameInfo","x","level","countToatal","minNumber","opacity","score_count","score","maxScore","collisionFloor","window","wx","vibrateShort","speedFixed","bounce","startDash","Math","ceil","nodeShock","restData","audioEngine","play","collisionBoard","state","isBoard","value","scheduleOnce","destroy","collisionOrc","explode","orcPool","put","total","creatOrc","console","log","collisionStorehouse","boom","instantiate","setPosition","parent","map","parseInt","random","collisionBomb","vibrateLong","getComponent","ParticleSystem","resetSystem","onCollisionEnter","other","self","name","bone","isSprint","speedBone","dragonBones","ArmatureDisplay","playAnimation","timeScale","onLoad","update","dt","height","stopSystem","gameOver"],"mappings":"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","file":"Ball.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Game","sourcesContent":["const Global = require('Global');\r\nconst colors = [\r\n    {\r\n        mountain: '#7D2C1B',\r\n        tree: '#491D12',\r\n        floor: '#75280C',\r\n        ground: '#3D1805',\r\n    }, {\r\n        mountain: '#81b68c',\r\n        tree: '#65977a',\r\n        floor: '#e5c282',\r\n        ground: '#2b5748',\r\n    }\r\n];\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // 风景移动容器\r\n        moveBox: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // 背景容器（canvas大小）\r\n        bgColor: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // 音效\r\n        audioFloor: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        audioDeath: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        audioBox: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        audioBoom: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        audioBoard: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        // 分数\r\n        scoreLabel: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        // 个人最远距离\r\n        maxLabel: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        // 金币\r\n        moneyLabel: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        // 掉落金币提示\r\n        moneyTip: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        // 炸弹粒子\r\n        explodeBoom: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        // 金币粒子\r\n        explodeGold: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n    },\r\n\r\n    // 掉落金币提示动画\r\n    moneyTipMove(num) {\r\n        Global.userInfo.money += num;\r\n        this.moneyLabel.string = Global.userInfo.money;\r\n        this.moneyTip.string = '金币 +' + num;\r\n        let show = cc.spawn(cc.fadeIn(0.3), cc.scaleTo(0.3, 2, 2));\r\n        let stop = cc.scaleTo(0.5, 1, 1);\r\n        let hide = cc.spawn(cc.fadeOut(0.3), cc.scaleTo(0.3, 1, 1));\r\n        let seq = cc.sequence(show, stop, hide);\r\n        seq.easing(cc.easeOut(3.0));\r\n        this.moneyTip.node.runAction(seq);\r\n    },\r\n\r\n    // 视觉缩放\r\n    viewScale() {\r\n        let val = 500;  // 正常弹起高度\r\n        if (this.node.y < val) return;\r\n\r\n        // 第一种（性能更好）\r\n        // Global.game.wrap.scale = val / this.node.y;\r\n\r\n        /**\r\n         * 第二种\r\n         * 75：球的半径\r\n         * 890：球弹起来的最大高度\r\n         */\r\n        let ss = 75 / (890 / this.node.y);\r\n        Global.game.wrap.scale = (val - ss) / this.node.y;\r\n    },\r\n\r\n    // 颜色过渡切换\r\n    colorSwitch(mountain, tree, floor, ground, num) {\r\n        function transform(node, key) {\r\n            let seq = cc.sequence(cc.fadeOut(0.3), cc.callFunc(() => {\r\n                node.color = cc.hexToColor(colors[num][key]);\r\n            }), cc.fadeIn(0.3));\r\n            node.runAction(seq);\r\n        }\r\n        transform(mountain, 'mountain');\r\n        transform(tree, 'tree');\r\n        transform(floor, 'floor');\r\n        transform(ground, 'ground');\r\n    },\r\n\r\n    // 背景移动\r\n    bgMove() {\r\n        const _w = this.moveBox.width;\r\n        let sun = this.moveBox.getChildByName('sun'),\r\n            tree = this.moveBox.getChildByName('tree'),\r\n            mountain = this.moveBox.getChildByName('mountain'),\r\n            floor = this.moveBox.getChildByName('floor'),\r\n            ground = this.moveBox.getChildByName('ground'),\r\n            cloud = this.moveBox.getChildByName('cloud');\r\n        let speed = Global.gameInfo.speed;\r\n        // console.log(speed);\r\n        \r\n        // 太阳 移动 \r\n        sun.x -= speed;\r\n\r\n        if (sun.x <= -sun.width) {\r\n            sun.x = _w;\r\n\r\n            // 难度增加\r\n            Global.gameInfo.level = Global.gameInfo.countToatal == Global.gameInfo.minNumber ? Global.gameInfo.level : Global.gameInfo.level + 1;\r\n            // console.log('难度增加======>', Global.gameInfo.level);\r\n\r\n            // 判断切换背景颜色\r\n            if (sun.opacity == 255) {\r\n                this.colorSwitch(mountain, tree, floor, ground, 1);\r\n                // this.bgColor.getChildByName('color-1').runAction(cc.fadeOut(0.3));\r\n                this.bgColor.getChildByName('color-2').runAction(cc.fadeIn(0.3));\r\n                sun.runAction(cc.fadeOut(0.3));\r\n                cloud.runAction(cc.fadeIn(0.3));\r\n            } else {\r\n                this.colorSwitch(mountain, tree, floor, ground, 0);\r\n                this.bgColor.getChildByName('color-2').runAction(cc.fadeOut(0.3));\r\n                // this.bgColor.getChildByName('color-1').runAction(cc.fadeIn(0.3));\r\n                sun.runAction(cc.fadeIn(0.3));\r\n                cloud.runAction(cc.fadeOut(0.3));\r\n            }\r\n        }\r\n\r\n        // 分数\r\n        this.score_count += speed;\r\n        if (this.score_count >= 5) {\r\n            this.score_count = 0;\r\n            Global.gameInfo.score += 1;\r\n            this.scoreLabel.string = Global.gameInfo.score + 'm';\r\n            if (Global.userInfo.maxScore > Global.gameInfo.score) {\r\n                this.maxLabel.string = `距离个人最远距离还差 ${Global.userInfo.maxScore - Global.gameInfo.score} m`;\r\n            } else {\r\n                this.maxLabel.string = `超越个人最远距离 ${Global.gameInfo.score - Global.userInfo.maxScore} m`;\r\n            }\r\n        }\r\n\r\n        // 云移动\r\n        cloud.x -= 5 + speed;\r\n        if (cloud.x <= -cloud.width) cloud.x = _w;\r\n\r\n        // 山丘移动\r\n        mountain.x -= 10 + speed * 2;\r\n        if (mountain.x <= -_w) mountain.x = 0;\r\n\r\n        // 树木移动\r\n        tree.x -= 12.5 + speed * 2.5;\r\n        if (tree.x <= -_w) tree.x = 0\r\n\r\n        // gound移动\r\n        ground.x -= 17.5 + speed * 3.5;\r\n        if (ground.x <= -_w) ground.x = 0;\r\n    },\r\n\r\n    // 撞到地板\r\n    collisionFloor() {\r\n        if (window.wx) wx.vibrateShort();\r\n        \r\n        if (Global.gameInfo.speed > Global.gameInfo.speedFixed) Global.gameInfo.speed = Global.gameInfo.speedFixed;\r\n        // max => 20;\r\n        this.bounce = 20 * (Global.gameInfo.speed / Global.gameInfo.speedFixed);\r\n\r\n        if (!Global.gameInfo.startDash) {\r\n            if (Global.gameInfo.speed > 1) {\r\n                Global.gameInfo.speed = Math.ceil(Global.gameInfo.speed) - 1;\r\n            } else {\r\n                Global.gameInfo.speed -= 1;\r\n            }\r\n        }\r\n\r\n        // console.log('撞到地板速度===>', Global.gameInfo.speed);\r\n\r\n        Global.game.nodeShock();\r\n\r\n        this.restData(true);\r\n        cc.audioEngine.play(this.audioFloor, false);\r\n        \r\n    },\r\n\r\n    // 撞到木板\r\n    collisionBoard(node) {\r\n        if (Global.gameInfo.state == 'over') return;\r\n        if (window.wx) wx.vibrateShort();\r\n    \r\n        // 砸到木板\r\n        this.isBoard = true; \r\n        if (this.value >= 1) {\r\n            this.bounce = 15;\r\n        } else {\r\n            this.bounce = 10;\r\n        }\r\n\r\n        if (!Global.gameInfo.startDash) {\r\n            if (Global.gameInfo.speed > Global.gameInfo.speedFixed) {\r\n                Global.gameInfo.speed = Global.gameInfo.speedFixed - 1;\r\n            } else {\r\n                Global.gameInfo.speed -= 0.5;\r\n            }\r\n        }\r\n\r\n        this.scheduleOnce(() => {\r\n            this.restData(true);\r\n            this.isBoard = false;\r\n        }, 0.01);\r\n        \r\n        cc.audioEngine.play(this.audioBoard, false);\r\n\r\n        node.destroy();\r\n    },\r\n\r\n    // 撞到兽人\r\n    collisionOrc(node) {\r\n        if (Global.gameInfo.state == 'over' || this.isBoard) return;\r\n        if (window.wx) wx.vibrateShort();\r\n\r\n        if (this.value >= 1) {\r\n            this.bounce = 20;\r\n            Global.gameInfo.speed += 0.5;\r\n            if (Global.gameInfo.speed > 8) Global.gameInfo.speed = 8;\r\n        } else {\r\n            let val = Global.gameInfo.speed;\r\n            if (Global.gameInfo.speed > Global.gameInfo.speedFixed) val = Global.gameInfo.speedFixed;\r\n            // max => 20;\r\n            \r\n            this.bounce = 18 * (val / Global.gameInfo.speedFixed);\r\n            // if (this.bounce < 8) this.bounce = 8;\r\n\r\n            if (!Global.gameInfo.startDash) Global.gameInfo.speed -= 0.5;\r\n            \r\n            // 高度 => 10 \r\n            // this.bounce = 5 + Global.gameInfo.speed;\r\n            // if (this.bounce > 10) this.bounce = 10;\r\n            // console.log('执行自由落体');\r\n        }\r\n\r\n        this.scheduleOnce(() => {\r\n            if (!this.isBoard) this.restData(false);\r\n        }, 0.01);\r\n\r\n        // console.log('speed', Global.gameInfo.speed);\r\n        // 播放溅血粒子\r\n        Global.game.explode(node);\r\n        // 回收兽人\r\n        Global.game.orcPool.put(node);\r\n\r\n        // 做难度判断是否生成兽人\r\n        if (Global.gameInfo.total - Global.gameInfo.level >= Global.gameInfo.countToatal) {\r\n            Global.game.creatOrc();\r\n        } else {\r\n            console.log('减少一个兽人============>');\r\n            Global.gameInfo.countToatal = Global.gameInfo.countToatal <= Global.gameInfo.minNumber ? Global.gameInfo.minNumber : Global.gameInfo.countToatal - 1;\r\n        }\r\n\r\n        cc.audioEngine.play(this.audioDeath, false);\r\n    },\r\n\r\n    // 撞到宝箱\r\n    collisionStorehouse(node) {\r\n        if (Global.gameInfo.state == 'over') return;\r\n        if (window.wx) wx.vibrateShort();\r\n\r\n        if (this.value >= 1) {\r\n            this.bounce = 25;\r\n            Global.gameInfo.speed += 1;\r\n            if (Global.gameInfo.speed > 8) Global.gameInfo.speed = 8;\r\n        } else {\r\n            this.bounce = 15;\r\n            Global.gameInfo.speed += 0.5;\r\n            if (Global.gameInfo.speed < 5) Global.gameInfo.speed = 3;\r\n            if (Global.gameInfo.speed > 8) Global.gameInfo.speed = 8;\r\n        }\r\n\r\n        this.scheduleOnce(() => {\r\n            this.restData(false);\r\n        }, 0.01);\r\n\r\n        node.destroy();\r\n\r\n        // 播放粒子\r\n        let boom = cc.instantiate(this.explodeGold);\r\n        boom.setPosition(node.x + 50, node.y + 50);\r\n        boom.parent = Global.game.map;\r\n\r\n        // 金币更新\r\n        let num = parseInt(50 * Math.random()) + 50;\r\n        this.moneyTipMove(num);\r\n\r\n        cc.audioEngine.play(this.audioBox, false);\r\n    },\r\n\r\n    // 撞到炸弹\r\n    collisionBomb(node) {\r\n        if (Global.gameInfo.state == 'over') return;\r\n        if (window.wx) wx.vibrateLong();\r\n        \r\n        if (this.value >= 1) {\r\n            this.bounce = 30;\r\n            Global.gameInfo.speed += 2;\r\n            if (Global.gameInfo.speed > 8) Global.gameInfo.speed = 8;\r\n        } else {\r\n            this.bounce = 20;\r\n            Global.gameInfo.speed += 1;\r\n            if (Global.gameInfo.speed < 5) Global.gameInfo.speed = 4;\r\n            if (Global.gameInfo.speed > 8) Global.gameInfo.speed = 8;\r\n        }\r\n\r\n        this.scheduleOnce(() => {\r\n            this.restData(false);\r\n        }, 0.01);\r\n        this.node.getChildByName('particle').getComponent(cc.ParticleSystem).resetSystem();\r\n        Global.game.nodeShock();\r\n        node.destroy();\r\n\r\n        // 播放粒子\r\n        let boom = cc.instantiate(this.explodeBoom);\r\n        boom.setPosition(node.x + 50, node.y + 50);\r\n        boom.parent = Global.game.map;\r\n\r\n        cc.audioEngine.play(this.audioBoom, false);\r\n    },\r\n\r\n    // 碰撞回调\r\n    onCollisionEnter(other, self) {\r\n        if (Global.gameInfo.state == 'over') return;\r\n        switch (other.node.name) {\r\n            case 'floor':\r\n                this.collisionFloor();\r\n                break;\r\n            case 'orc':\r\n                this.collisionOrc(other.node);\r\n                break;\r\n            case 'storehouse':\r\n                this.collisionStorehouse(other.node);\r\n                break;\r\n            case 'bomb':\r\n                this.collisionBomb(other.node);\r\n                break;\r\n            case 'board':\r\n                this.collisionBoard(other.node);\r\n                break;\r\n        }\r\n    },\r\n    // 重置下参数\r\n    restData(bone = false) {\r\n        // 判断不是在高能陨石模式下才执行\r\n        if (!Global.gameInfo.startDash) {\r\n            // 判断加速框出现\r\n            if (Global.gameInfo.speed == 8) {\r\n                if (!this.isSprint) {\r\n                    this.isSprint = true;\r\n                    Global.game.speedBone.getComponent(dragonBones.ArmatureDisplay).playAnimation('move', 0);\r\n                }\r\n            } else {\r\n                if (this.isSprint) {\r\n                    this.isSprint = false;\r\n                    Global.game.speedBone.getComponent(dragonBones.ArmatureDisplay).playAnimation('stop', 0);\r\n                }\r\n            }\r\n            if (bone) {\r\n                this.node.getChildByName('bone').getComponent(dragonBones.ArmatureDisplay).timeScale = 0.5;\r\n            } else {\r\n                this.node.getChildByName('bone').getComponent(dragonBones.ArmatureDisplay).timeScale = 1;\r\n            }\r\n        }\r\n        // 衰减值\r\n        this.value = 0.5;\r\n        \r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        // 弹力值\r\n        this.bounce = 0;\r\n        this.restData();\r\n        // 分数计数（模拟距离）\r\n        this.score_count = 0;\r\n        // 是否正在加速\r\n        this.isSprint = false;\r\n\r\n        this.moneyLabel.string = Global.userInfo.money;\r\n    },\r\n\r\n    // start() {},\r\n\r\n    update(dt) {\r\n        if (Global.gameInfo.state != 'over') {\r\n\r\n            if (Global.gameInfo.speed <= 0) {\r\n                Global.gameInfo.state = 'over';\r\n                this.node.y = this.node.height / 2;\r\n                this.bounce = 0;\r\n                this.node.getChildByName('bone').getComponent(dragonBones.ArmatureDisplay).playAnimation('rockStop', 1);\r\n                this.node.getChildByName('particle').getComponent(cc.ParticleSystem).stopSystem();\r\n                Global.game.gameOver();\r\n            }\r\n\r\n            // 背景移动\r\n            this.bgMove();\r\n\r\n            // 视觉缩放监听\r\n            this.viewScale();\r\n\r\n            // 第一种\r\n            this.bounce -= 1 * this.value;\r\n            this.node.y += this.bounce;\r\n            \r\n            // 防止掉落\r\n            if (this.node.y < 0) this.node.y = this.node.width / 2 + 1;\r\n        }\r\n    },\r\n});\r\n"]}