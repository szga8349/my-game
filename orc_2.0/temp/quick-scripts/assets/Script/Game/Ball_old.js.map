{"version":3,"sources":["Ball_old.js"],"names":["Global","require","colors","mountain","tree","floor","ground","cc","Class","extends","Component","properties","moveBox","default","type","Node","bgColor","audioFloor","AudioClip","audioDeath","audioBox","audioBoom","audioBoard","scoreLabel","Label","maxLabel","moneyLabel","moneyTip","explodeBoom","Prefab","explodeGold","moneyTipMove","num","userInfo","money","string","show","spawn","fadeIn","scaleTo","stop","hide","fadeOut","seq","sequence","easing","easeOut","node","runAction","viewScale","val","y","ss","game","wrap","scale","colorSwitch","transform","key","callFunc","color","hexToColor","bgMove","_w","width","sun","getChildByName","cloud","x","bg_speed","gameInfo","level","countToatal","minNumber","opacity","score_count","score","maxScore","restData","bone","abs","floorNum","startDash","isSprint","speedBone","getComponent","dragonBones","ArmatureDisplay","playAnimation","value","timeScale","collisionFloor","window","wx","vibrateShort","state","height","bounce","ParticleSystem","stopSystem","gameOver","nodeShock","audioEngine","play","collisionBoard","isBoard","destroy","scheduleOnce","collisionOrc","explode","orcPool","put","total","creatOrc","console","log","collisionStorehouse","boom","instantiate","setPosition","parent","map","parseInt","Math","random","collisionBomb","vibrateLong","onCollisionEnter","other","self","name","onLoad","update","dt"],"mappings":"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","file":"Ball_old.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Game","sourcesContent":["const Global = require('Global');\r\nconst colors = [\r\n    {\r\n        mountain: '#7D2C1B',\r\n        tree: '#491D12',\r\n        floor: '#75280C',\r\n        ground: '#3D1805',\r\n    }, {\r\n        mountain: '#81b68c',\r\n        tree: '#65977a',\r\n        floor: '#e5c282',\r\n        ground: '#2b5748',\r\n    }\r\n];\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // 风景移动容器\r\n        moveBox: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // 背景容器（canvas大小）\r\n        bgColor: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // 音效\r\n        audioFloor: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        audioDeath: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        audioBox: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        audioBoom: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        audioBoard: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        // 分数\r\n        scoreLabel: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        // 个人最远距离\r\n        maxLabel: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        // 金币\r\n        moneyLabel: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        // 掉落金币提示\r\n        moneyTip: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        // 炸弹粒子\r\n        explodeBoom: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        // 金币粒子\r\n        explodeGold: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n    },\r\n\r\n    // 掉落金币提示动画\r\n    moneyTipMove(num) {\r\n        Global.userInfo.money += num;\r\n        this.moneyLabel.string = Global.userInfo.money;\r\n        this.moneyTip.string = '金币 +' + num;\r\n        let show = cc.spawn(cc.fadeIn(0.3), cc.scaleTo(0.3, 2, 2));\r\n        let stop = cc.scaleTo(0.5, 1, 1);\r\n        let hide = cc.spawn(cc.fadeOut(0.3), cc.scaleTo(0.3, 1, 1));\r\n        let seq = cc.sequence(show, stop, hide);\r\n        seq.easing(cc.easeOut(3.0));\r\n        this.moneyTip.node.runAction(seq);\r\n    },\r\n\r\n    // 视觉缩放\r\n    viewScale() {\r\n        let val = 500;  // 正常弹起高度\r\n        if (this.node.y < val) return;\r\n\r\n        // 第一种（性能更好）\r\n        // Global.game.wrap.scale = val / this.node.y;\r\n\r\n        /**\r\n         * 第二种\r\n         * 75：球的半径\r\n         * 890：球弹起来的最大高度\r\n         */\r\n        let ss = 75 / (890 / this.node.y);\r\n        Global.game.wrap.scale = (val - ss) / this.node.y;\r\n    },\r\n\r\n    // 颜色过渡切换\r\n    colorSwitch(mountain, tree, floor, ground, num) {\r\n        function transform(node, key) {\r\n            let seq = cc.sequence(cc.fadeOut(0.3), cc.callFunc(() => {\r\n                node.color = cc.hexToColor(colors[num][key]);\r\n            }), cc.fadeIn(0.3));\r\n            node.runAction(seq);\r\n        }\r\n        transform(mountain, 'mountain');\r\n        transform(tree, 'tree');\r\n        transform(floor, 'floor');\r\n        transform(ground, 'ground');\r\n    },\r\n\r\n    // 背景移动\r\n    bgMove() {\r\n        const _w = this.moveBox.width;\r\n        let sun = this.moveBox.getChildByName('sun'),\r\n            tree = this.moveBox.getChildByName('tree'),\r\n            mountain = this.moveBox.getChildByName('mountain'),\r\n            floor = this.moveBox.getChildByName('floor'),\r\n            ground = this.moveBox.getChildByName('ground'),\r\n            cloud = this.moveBox.getChildByName('cloud');\r\n        // 太阳 移动 \r\n        sun.x -= this.bg_speed;\r\n\r\n        if (sun.x <= -sun.width) {\r\n            sun.x = _w;\r\n\r\n            // 难度增加\r\n            Global.gameInfo.level = Global.gameInfo.countToatal == Global.gameInfo.minNumber ? Global.gameInfo.level : Global.gameInfo.level + 1;\r\n            // console.log('难度增加======>', Global.gameInfo.level);\r\n\r\n            // 判断切换背景颜色\r\n            if (sun.opacity == 255) {\r\n                this.colorSwitch(mountain, tree, floor, ground, 1);\r\n                // this.bgColor.getChildByName('color-1').runAction(cc.fadeOut(0.3));\r\n                this.bgColor.getChildByName('color-2').runAction(cc.fadeIn(0.3));\r\n                sun.runAction(cc.fadeOut(0.3));\r\n                cloud.runAction(cc.fadeIn(0.3));\r\n            } else {\r\n                this.colorSwitch(mountain, tree, floor, ground, 0);\r\n                this.bgColor.getChildByName('color-2').runAction(cc.fadeOut(0.3));\r\n                // this.bgColor.getChildByName('color-1').runAction(cc.fadeIn(0.3));\r\n                sun.runAction(cc.fadeIn(0.3));\r\n                cloud.runAction(cc.fadeOut(0.3));\r\n            }\r\n        }\r\n\r\n        // 分数\r\n        this.score_count += this.bg_speed;\r\n        if (this.score_count >= 5) {\r\n            this.score_count = 0;\r\n            Global.gameInfo.score += 1;\r\n            this.scoreLabel.string = Global.gameInfo.score + 'm';\r\n            if (Global.userInfo.maxScore > Global.gameInfo.score) {\r\n                this.maxLabel.string = `距离个人最远距离还差 ${Global.userInfo.maxScore - Global.gameInfo.score} m`;\r\n            } else {\r\n                this.maxLabel.string = `超越个人最远距离 ${Global.gameInfo.score - Global.userInfo.maxScore} m`;\r\n            }\r\n        }\r\n\r\n        // 云移动\r\n        cloud.x -= 5 + this.bg_speed;\r\n        if (cloud.x <= -cloud.width) cloud.x = _w;\r\n\r\n        // 山丘移动\r\n        mountain.x -= 10 + this.bg_speed * 2;\r\n        if (mountain.x <= -_w) mountain.x = 0;\r\n\r\n        // 树木移动\r\n        tree.x -= 12.5 + this.bg_speed * 2.5;\r\n        if (tree.x <= -_w) tree.x = 0\r\n\r\n        // gound移动\r\n        ground.x -= 17.5 + this.bg_speed * 3.5;\r\n        if (ground.x <= -_w) ground.x = 0;\r\n    },\r\n\r\n    // 重置下参数\r\n    restData(num = 0, bone = false, abs = 1) {\r\n        // 砸地板计数\r\n        this.floorNum = num;\r\n        // 判断不是在高能陨石模式下才执行\r\n        if (!Global.gameInfo.startDash) {\r\n            this.bg_speed += abs;\r\n            if (this.bg_speed > 5) this.bg_speed = 5;\r\n            if (this.bg_speed < 1) this.bg_speed = 1;\r\n            // console.log('背景移动速度=====>', this.bg_speed);\r\n            \r\n            // 判断加速框出现\r\n            if (this.bg_speed == 5) {\r\n                if (!this.isSprint) {\r\n                    this.isSprint = true;\r\n                    Global.game.speedBone.getComponent(dragonBones.ArmatureDisplay).playAnimation('move', 0);\r\n                    // console.log('执行move');\r\n                    // let seq = cc.sequence(cc.fadeIn(0.2), cc.fadeOut(0.2));\r\n                    // Global.game.blaze.runAction(cc.repeatForever(seq));\r\n                }\r\n            } else {\r\n                if (this.isSprint) {\r\n                    this.isSprint = false;\r\n                    Global.game.speedBone.getComponent(dragonBones.ArmatureDisplay).playAnimation('stop', 0);\r\n                    // console.log('执行stop');\r\n                    // Global.game.blaze.stopAllActions();\r\n                    // Global.game.blaze.runAction(cc.fadeOut(0.2));\r\n                }\r\n            }\r\n        }\r\n        \r\n        // 衰减值\r\n        this.value = 0.5;\r\n        if (bone) {\r\n            this.node.getChildByName('bone').getComponent(dragonBones.ArmatureDisplay).timeScale = 0.5;\r\n        } else {\r\n            this.node.getChildByName('bone').getComponent(dragonBones.ArmatureDisplay).timeScale = 1;\r\n        }\r\n    },\r\n\r\n    // 撞到地板\r\n    collisionFloor() {\r\n        if (window.wx) wx.vibrateShort();\r\n        this.floorNum += 5;\r\n        if (this.floorNum >= 25) {\r\n            // cc.log('游戏结束'); \r\n            Global.gameInfo.state = 'over';\r\n            this.node.y = this.node.height / 2;\r\n            this.bounce = 0;\r\n            this.node.getChildByName('bone').getComponent(dragonBones.ArmatureDisplay).playAnimation('rockStop', 1);\r\n            this.node.getChildByName('particle').getComponent(cc.ParticleSystem).stopSystem();\r\n            Global.game.gameOver();\r\n        } else {\r\n            this.bounce = 25 - this.floorNum;\r\n        }\r\n\r\n        Global.game.nodeShock();\r\n\r\n        this.restData(this.floorNum, true, -2);\r\n        cc.audioEngine.play(this.audioFloor, false);\r\n    },\r\n\r\n    // 撞到木板\r\n    collisionBoard(node) {\r\n        if (Global.gameInfo.state == 'over') return;\r\n        if (window.wx) wx.vibrateShort();\r\n        this.floorNum = 10;\r\n\r\n        this.isBoard = true; // 碰到木板\r\n        if (this.value >= 1) {\r\n            this.bounce = 15;\r\n        } else {\r\n            this.bounce = 10;\r\n        }\r\n        node.destroy();\r\n        this.scheduleOnce(() => {\r\n            this.restData(this.floorNum, true, -1);\r\n            this.isBoard = false;\r\n        }, 0.01);\r\n        cc.audioEngine.play(this.audioBoard, false);\r\n    },\r\n\r\n    // 撞到兽人\r\n    collisionOrc(node) {\r\n        if (Global.gameInfo.state == 'over' || this.isBoard) return;\r\n        if (window.wx) wx.vibrateShort();\r\n\r\n        if (this.value >= 1) {\r\n            this.bounce = 20;\r\n            this.scheduleOnce(() => {\r\n                if (!this.isBoard) this.restData();\r\n            }, 0.01);\r\n        } else {\r\n            this.bounce = 10;\r\n            this.floorNum = 10;\r\n            this.scheduleOnce(() => {\r\n                if (!this.isBoard) this.restData(this.floorNum, false, -1);\r\n            }, 0.01);\r\n        }\r\n\r\n        // 播放溅血粒子\r\n        Global.game.explode(node);\r\n        // 回收兽人\r\n        Global.game.orcPool.put(node);\r\n\r\n        // 做难度判断是否生成兽人\r\n        if (Global.gameInfo.total - Global.gameInfo.level >= Global.gameInfo.countToatal) {\r\n            Global.game.creatOrc();\r\n        } else {\r\n            console.log('减少一个兽人============>');\r\n            Global.gameInfo.countToatal = Global.gameInfo.countToatal <= Global.gameInfo.minNumber ? Global.gameInfo.minNumber : Global.gameInfo.countToatal - 1;\r\n        }\r\n\r\n        cc.audioEngine.play(this.audioDeath, false);\r\n    },\r\n\r\n    // 撞到宝箱\r\n    collisionStorehouse(node) {\r\n        if (Global.gameInfo.state == 'over') return;\r\n        if (window.wx) wx.vibrateShort();\r\n\r\n        if (this.value >= 1) {\r\n            this.bounce = 25;\r\n            this.scheduleOnce(() => {\r\n                this.restData();\r\n            }, 0.01);\r\n        } else {\r\n            this.bounce = 15;\r\n            this.scheduleOnce(() => {\r\n                this.restData(0, false, -1);\r\n            }, 0.01);\r\n        }\r\n\r\n        node.destroy();\r\n\r\n        // 播放粒子\r\n        let boom = cc.instantiate(this.explodeGold);\r\n        boom.setPosition(node.x + 50, node.y + 50);\r\n        boom.parent = Global.game.map;\r\n\r\n        // 金币更新\r\n        let num = parseInt(50 * Math.random()) + 50;\r\n        this.moneyTipMove(num);\r\n\r\n        cc.audioEngine.play(this.audioBox, false);\r\n    },\r\n\r\n    // 撞到炸弹\r\n    collisionBomb(node) {\r\n        if (Global.gameInfo.state == 'over') return;\r\n        if (window.wx) wx.vibrateLong();\r\n        \r\n        if (this.value >= 1) {\r\n            this.bounce = 30;\r\n            this.scheduleOnce(() => {\r\n                this.restData();\r\n            }, 0.01);\r\n        } else {\r\n            this.bounce = 20;\r\n            this.scheduleOnce(() => {\r\n                this.restData(0, false, -1);\r\n            }, 0.01);\r\n        }\r\n\r\n        Global.game.nodeShock();\r\n        node.destroy();\r\n\r\n        // 播放粒子\r\n        let boom = cc.instantiate(this.explodeBoom);\r\n        boom.setPosition(node.x + 50, node.y + 50);\r\n        boom.parent = Global.game.map;\r\n\r\n        cc.audioEngine.play(this.audioBoom, false);\r\n    },\r\n\r\n    // 碰撞回调\r\n    onCollisionEnter(other, self) {\r\n        if (Global.gameInfo.state == 'over') return;\r\n        switch (other.node.name) {\r\n            case 'floor':\r\n                this.collisionFloor();\r\n                break;\r\n            case 'orc':\r\n                this.collisionOrc(other.node);\r\n                break;\r\n            case 'storehouse':\r\n                this.collisionStorehouse(other.node);\r\n                break;\r\n            case 'bomb':\r\n                this.collisionBomb(other.node);\r\n                break;\r\n            case 'board':\r\n                this.collisionBoard(other.node);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        // 弹力值\r\n        this.bounce = 0;\r\n        // 设置速度\r\n        this.bg_speed = 0;\r\n        this.restData();\r\n        // 分数计数（模拟距离）\r\n        this.score_count = 0;\r\n        // 是否正在加速\r\n        this.isSprint = false;\r\n\r\n        this.moneyLabel.string = Global.userInfo.money;\r\n    },\r\n\r\n    // start() {},\r\n\r\n    update(dt) {\r\n        if (Global.gameInfo.state == 'running') {\r\n            // 背景移动\r\n            this.bgMove();\r\n\r\n            // 视觉缩放监听\r\n            this.viewScale();\r\n\r\n            // 第一种\r\n            this.bounce -= 1 * this.value;\r\n            this.node.y += this.bounce;\r\n\r\n            // 防止掉落\r\n            if (this.node.y < 0) this.node.y = this.node.width / 2 + 1;\r\n        }\r\n    },\r\n});\r\n"]}