{"version":3,"sources":["Rank.js"],"names":["cc","Class","extends","Component","properties","subBox","default","type","Sprite","openShare","wx","shareAppMessage","title","Global","shareInfo","imageUrl","url","backGame","window","postMessage","action","director","loadScene","backHome","onLoad","start","sub","Texture2D","showShareMenu","onShareAppMessage","updaetSubDomainCanvas","openDataContext","getOpenDataContext","sharedCanvas","canvas","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame","update","dt"],"mappings":";;;;;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACAC,gBAAQ;AACJC,qBAAS,IADL;AAEJC,kBAAMP,GAAGQ;AAFL;AAFA,KAHP;AAULC,aAVK,uBAUO;AACRC,WAAGC,eAAH,CAAmB;AACfC,mBAAOC,OAAOC,SAAP,CAAiBF,KADT;AAEfG,sBAAUF,OAAOC,SAAP,CAAiBE;AAFZ,SAAnB;AAIH,KAfI;AAgBLC,YAhBK,sBAgBM;AACP,YAAIC,OAAOR,EAAX,EAAeA,GAAGS,WAAH,CAAe,EAAEC,QAAQ,MAAV,EAAf;AACfpB,WAAGqB,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACH,KAnBI;AAoBLC,YApBK,sBAoBM;AACP,YAAIL,OAAOR,EAAX,EAAeA,GAAGS,WAAH,CAAe,EAAEC,QAAQ,MAAV,EAAf;AACfpB,WAAGqB,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACH,KAvBI;;AAwBL;;AAEAE,UA1BK,oBA0BK;AACN,YAAIN,OAAOR,EAAX,EAAe;AACXA,eAAGS,WAAH,CAAe;AACXC,wBAAQ;AADG,aAAf;AAGH;AACJ,KAhCI;AAkCLK,SAlCK,mBAkCI;AACL,YAAIP,OAAOR,EAAX,EAAe;AACX;AACA,iBAAKgB,GAAL,GAAW,IAAI1B,GAAG2B,SAAP,EAAX;AACA;AACAjB,eAAGkB,aAAH;AACA;AACAlB,eAAGmB,iBAAH,CAAqB,eAAO;AACxB,uBAAO;AACHjB,2BAAOC,OAAOC,SAAP,CAAiBF,KADrB;AAEHG,8BAAUF,OAAOC,SAAP,CAAiBE;AAFxB,iBAAP;AAIH,aALD;AAMH;AACJ,KAhDI;AAkDLc,yBAlDK,mCAkDmB;AACpB,YAAI,CAAC,KAAKJ,GAAV,EAAe;AACf,YAAIK,kBAAkBrB,GAAGsB,kBAAH,EAAtB;AACA,YAAIC,eAAeF,gBAAgBG,MAAnC;AACA,aAAKR,GAAL,CAASS,eAAT,CAAyBF,YAAzB;AACA,aAAKP,GAAL,CAASU,mBAAT;AACA,aAAK/B,MAAL,CAAYgC,WAAZ,GAA0B,IAAIrC,GAAGsC,WAAP,CAAmB,KAAKZ,GAAxB,CAA1B;AACH,KAzDI;AA2DLa,UA3DK,kBA2DGC,EA3DH,EA2DO;AACR,aAAKV,qBAAL;AACH;AA7DI,CAAT","file":"Rank.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // 子项目容器\r\n        subBox: {\r\n            default: null,\r\n            type: cc.Sprite\r\n        }\r\n    },\r\n    openShare() {\r\n        wx.shareAppMessage({\r\n            title: Global.shareInfo.title,\r\n            imageUrl: Global.shareInfo.url\r\n        });\r\n    },\r\n    backGame() {\r\n        if (window.wx) wx.postMessage({ action: 'hide' });\r\n        cc.director.loadScene('Game');\r\n    },\r\n    backHome() {\r\n        if (window.wx) wx.postMessage({ action: 'hide' });\r\n        cc.director.loadScene('Home');\r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        if (window.wx) {\r\n            wx.postMessage({ \r\n                action: 'show'\r\n            });\r\n        }\r\n    },\r\n\r\n    start () {\r\n        if (window.wx) {\r\n            // 设置一个子项目canvas\r\n            this.sub = new cc.Texture2D();\r\n            // 显示分享按钮\r\n            wx.showShareMenu();\r\n            // 设置转发分内容\r\n            wx.onShareAppMessage(res => {\r\n                return {\r\n                    title: Global.shareInfo.title,\r\n                    imageUrl: Global.shareInfo.url,\r\n                }\r\n            });\r\n        }\r\n    },\r\n\r\n    updaetSubDomainCanvas() {\r\n        if (!this.sub) return;\r\n        let openDataContext = wx.getOpenDataContext();\r\n        let sharedCanvas = openDataContext.canvas;\r\n        this.sub.initWithElement(sharedCanvas);\r\n        this.sub.handleLoadedTexture();\r\n        this.subBox.spriteFrame = new cc.SpriteFrame(this.sub);\r\n    },\r\n\r\n    update (dt) {\r\n        this.updaetSubDomainCanvas();\r\n    },\r\n});\r\n"]}